<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>学术会议管理平台</title>
    <meta charset="utf-8">
    <link href="../libs/css/bootstrap.css" rel="stylesheet">
    <link href="../libs/css/bootstrap.min.css" rel="stylesheet">
    <script src="../libs/js/topnav.js"></script>
    <script src="../libs/js/search.js"></script>
    <script src="../libs/js/jquery.min.js"></script>
    <script src="../libs/js/bootstrap.min.js"></script>
    <style media="screen">
      .main-header {
        padding-top: 100px;
        padding-bottom: 100px;
        background-repeat: no-repeat;
        background-position: center 20%;
        -webkit-background-size: cover;
        background-size: cover;
      }
      tbody {
        display: table-row-group;
        vertical-align: middle;
        border-color: inherit;
      }
      .center {
        float: none;
        margin-left: 26%;
      }
      .list .list-item{
        padding: 3% 0% 2% 5%;
        width: 100%;
        height: 100%;
        float: left;
        border-left: 10px solid transparent;
        overflow: hidden;
      }
      .information{
        position: relative;
        background: #f6f6f6
      }
      .information-l-4{
        padding:15px;
      }
      .dll{
        width:80%;
      }
      .calendar-container{
        margin-right: 20px;
      }
      th{
        font-weight: 500;
        border-bottom: 1px solid #deeee9;
        border-top: 1px solid #deeee9;
      }
      tr:hover{
        background-color:#d8e4f7;
        border-left: 5px solid #000ecc;
      }
      .panel{
        margin-bottom: 0px;
      }
      .checkbox-custom {
        position: relative;
        padding: 0 15px 0 25px;
        margin-bottom: 7px;
        margin-top: 0;
        display: inline-block;
      }
/*将初始的checkbox的样式改变*/
    .checkbox-custom input[type="checkbox"] {
        opacity: 0;/*将初始的checkbox隐藏起来*/
        position: absolute;
        cursor: pointer;
        z-index: 2;
        margin: -6px 0 0 0;
        top: 50%;
        left: 3px;
    }
/*设计新的checkbox，位置*/
    .checkbox-custom label:before {
        content: '';
        position: absolute;
        top: 50%;
        left: 0;
        margin-top: -9px;
        width: 19px;
        height: 18px;
        display: inline-block;
        border-radius: 2px;
        border: 1px solid #bbb;
        background: #fff;
    }
/*点击初始的checkbox，将新的checkbox关联起来*/
    .checkbox-custom input[type="checkbox"]:checked +label:after {
        position: absolute;
        display: inline-block;
        font-family: 'Glyphicons Halflings';
        content: "\e013";
        top: 42%;
        left: 3px;
        margin-top: -5px;
        font-size: 11px;
        line-height: 1;
        width: 16px;
        height: 16px;
        color: #333;
    }
    .checkbox-custom label {
        cursor: pointer;
        line-height: 1.2;
        font-weight: normal;/*改变了rememberme的字体*/
        margin-bottom: 0;
        text-align: left;
    }
    .remove{
      float: right;
      top: 25px;
      right: 10px;
      opacity: 0.2;
    }
    .remove:hover{
      opacity: 0.6;
    }
  </style>
  </head>
  <header class="main-header" style="background-image: url(../libs/img/c.jpg)">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <h1 style="color: white; text-align: center;"><font size="24">学术会议交流管理平台</font></h1>
                    <!--<img src="./Ghost 开源博客平台 _ Ghost中文网_files/fcb3879e14429d75833a461572e64.jpg" alt="Ghost 博客系统" class="hide">-->
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <h3 style="color: white; text-align: center;">开发团队：Uno</h3>
                </div>
            </div>
        </div>
  </header>
  <body>
    <div id="topnav"></div>
    <!--Search-->
    <div class="information">
      <div class="container">
        <div class="row">
          <div class="col-sm-9 main">
            <div class="panel panel-default" style="margin-bottom:10px; background: #fff; margin-top: 10px; float: left; width: 100%;">
              <div class="posirt-h panel panel-default" style="height: 60px;position: relative;z-index: 1;float: left;width: 100%;">
                <ul class="list-inline">
                  <li class="list-item "><h4 style="margin:20px;"><strong>搜索结果</strong></h4></li>
                </ul>
              </div>
              <table id="conference-info-container" class="table" border="0" class="table_ric2" cellspacing="0" cellpadding="0" style="100%">
                <tbody id="info">
                </tbody>
              </table>
            </div>
            <nav class="text-center">
            <div class="pagination pagination-lg">
              <li class="page previous" onclick="movepage(0)"><a id="page" class="pagg" href="#">上一页</a></li>
              <li class="page next" onclick="movepage(1)"><a id="page" class="pagg next_link" href="#">下一页</a></li>
            </div>
            </nav>
          </div>
          <div class="col-sm-3 side-bar" style="float:left; top:10px;">
            <div class=" panel panel-default" style="padding: 20px;">
              <div class="search-condition">
                <div class="keyword">
                  <div class="remove_container">
                  <i class="glyphicon glyphicon-remove remove" onclick="doClear()"></i>
                  </div>
                  <input id="keyword" class="form-control" type="text" name="keyword" value="" placeholder="关键词" style="padding-right: 25px;">
                </div>
                <br>
                <div class="start-date">
                  <label for="">会议开始日期</label>
                  <input id="start" class="form-control" type="date" name="" value="" placeholder="会议开始时间">
                </div>
                <br>
                <div class="end-date">
                  <label for="">会议结束日期</label>
                  <input id="end" class="form-control" type="date" name="" value="" placeholder="会议结束时间">
                </div>
                <br>
                <div class="checkbox-custom check-default">
                  <input id="check1" type="checkbox" name="" value="" onchange="checking(0)">
                  <label for="check">是否正在投稿</label>
                </div>
                <div class="checkbox-custom check-default">
                  <input id="check2" type="checkbox" name="" value="" onchange="checking(1)">
                  <label for="check">是否正在注册</label>
                </div>
              </div>
              <br>
              <div class="keyword">
                <button id="searchbtn" type="submit" class="btn btn-primary btn-block btn-lg"  name="" onclick="doSearch()">搜索</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script type="text/javascript">
  var meeting_url="http://154.8.211.55:8081/search/meeting";
  var url="http://154.8.211.55:8081";
  var cur_page=0;
  var keyword="";
  var start="";
  var end="";
  var flag1=false;
  var flag2=false;
  window.onload=function(){
    $("#topnav").load("topnav.txt",function(){
      var a=checkName();
      $("#uname").append(a);
      var d=new Date();
      var day=d.getDate();
      var month=d.getMonth() + 1;
      var year=d.getFullYear();
      var u_key=location.search.split("=")[1];
      //alert(u_key);
      if(u_key==null){
      $.get(meeting_url+"?startDate="+year+"-"+month+"-"+day+"&size=10",function(data){
        if(!data)
        {
          alert("错误");
        }
        else
        {
          for(var i=0;i<data.length;i++)
          {
            var v1=data[i].meetingId;
            var v2=data[i].title;
            var v3_1=data[i].postStartDate;
            var v3_2=data[i].postEndDate;
            var v4=data[i].institution;
            if(v4===null)
            {
              v4="未定";
            }
            else{
              v4=data[i].institution.institutionName;
            }
            var v5=data[i].address;
            var v6=data[i].startDate;
            var v7=data[i].endDate;
            var v8_1=data[i].registStartDate;
            var v8_2=data[i].registrationDeadline;
            if(v3_1===null)
              v3_1="未定";
            if(v3_2===null)
              v3_2="未定";
            if(v6===null)
              v6="未定";
            if(v7===null)
              v7="未定";
            if(v8_1===null)
               v8_1="未定";
            if(v8_2===null)
              v8_2="未定";
            if(v5==="")
              v5="未定";
            $("tbody").append(
              "<tr><th class='list'><div class='list-item'><dl class='dll' style='width: 88%;'><dt><h4><a href='../conference/conference-main.html?meetingId="+v1+"' target='' class='title'>"+v2+"</a></h4></dt><dd class=''><p><span class='calendar-container' style=''><i class='glyphicon glyphicon-calendar'></i><span>会议期间: </span><span id='calendar'> "+v6+" ~ "+v7+"</span></span><span class='place-container' style=''><i class='glyphicon glyphicon-map-marker'></i><span id='place'> "+v5+"</span></span></p></dd><dd><p><span><i class='glyphicon glyphicon-time'></i><span>投稿期间:<span><span>"+v3_1+" ~ "+v3_2+"</span></span></p><div class=''><span class='period_container'><p><i class='glyphicon glyphicon-time'></i><span>注册期间: </span><span id='register_period'>"+v8_1+" ~ "+v8_2+"</span></p></div></dd><dd class='institution'><div class=''><i class='glyphicon glyphicon-home'></i> "+v4+"</div></dd></dl></div></th></tr>"
            );
          }
        }
      })}
      else{
        //alert("1111");
        $.get(meeting_url+"?keyword="+u_key+"&size=10",function(data){
          if(!data)
          {
            alert("错误");
          }
          else
          {
            for(var i=0;i<data.length;i++)
            {
              var v1=data[i].meetingId;
              var v2=data[i].title;
              var v3_1=data[i].postStartDate;
              var v3_2=data[i].postEndDate;
              var v4=data[i].institution;
              if(v4===null)
              {
                v4="未定";
              }
              else{
                v4=data[i].institution.institutionName;
              }
              var v5=data[i].address;
              var v6=data[i].startDate;
              var v7=data[i].endDate;
              var v8_1=data[i].registStartDate;
              var v8_2=data[i].registrationDeadline;
              if(v3_1===null)
                v3_1="未定";
              if(v3_2===null)
                v3_2="未定";
              if(v6===null)
                v6="未定";
              if(v7===null)
                v7="未定";
              if(v8_1===null)
                 v8_1="未定";
              if(v8_2===null)
                v8_2="未定";
              if(v5==="")
                v5="未定";
              $("tbody").append(
                "<tr><th class='list'><div class='list-item'><dl class='dll' style='width: 88%;'><dt><h4><a href='../conference/conference-main.html?meetingId="+v1+"' target='' class='title'>"+v2+"</a></h4></dt><dd class=''><p><span class='calendar-container' style=''><i class='glyphicon glyphicon-calendar'></i><span>会议期间: </span><span id='calendar'> "+v6+" ~ "+v7+"</span></span><span class='place-container' style=''><i class='glyphicon glyphicon-map-marker'></i><span id='place'> "+v5+"</span></span></p></dd><dd><p><span><i class='glyphicon glyphicon-time'></i><span>投稿期间：<span><span> "+v3_1+" ~ "+v3_2+"</span></span></p><div class=''><span class='period_container'><p><i class='glyphicon glyphicon-time'></i><span>注册期间: </span><span id='register_period'>"+v8_1+" ~ "+v8_2+"</span></p></div></dd><dd class='institution'><div class=''><i class='glyphicon glyphicon-home'></i> "+v4+"</div></dd></dl></div></th></tr>"
              );
            }
          }
        })
      }
    });
  }
  window.onload=function(){
    $("#topnav").load("topnav.txt",function(){
      var a=checkName();
      $("#uname").append(a);
      var d=new Date();
      var day=d.getDate();
      var month=d.getMonth() + 1;
      var year=d.getFullYear();
      var u_key=location.search.split("=")[1];
      //alert(u_key);
      if(u_key==null){
      $.get(meeting_url+"?startDate="+year+"-"+month+"-"+day+"&size=10",function(data){
        if(!data)
        {
          alert("错误");
        }
        else
        {
          for(var i=0;i<data.length;i++)
          {
            var v1=data[i].meetingId;
            var v2=data[i].title;
            var v3_1=data[i].postStartDate;
            var v3_2=data[i].postEndDate;
            var v4=data[i].institution;
            if(v4===null)
            {
              v4="未定";
            }
            else{
              v4=data[i].institution.institutionName;
            }
            var v5=data[i].address;
            var v6=data[i].startDate;
            var v7=data[i].endDate;
            var v8_1=data[i].registStartDate;
            var v8_2=data[i].registrationDeadline;
            if(v3_1===null)
              v3_1="未定";
            if(v3_2===null)
              v3_2="未定";
            if(v6===null)
              v6="未定";
            if(v7===null)
              v7="未定";
            if(v8_1===null)
               v8_1="未定";
            if(v8_2===null)
              v8_2="未定";
            if(v5==="")
              v5="未定";
            $("tbody").append(
              "<tr><th class='list'><div class='list-item'><dl class='dll' style='width: 88%;'><dt><h4><a href='../conference/conference-main.html?meetingId="+v1+"' target='' class='title'>"+v2+"</a></h4></dt><dd class=''><p><span class='calendar-container' style=''><i class='glyphicon glyphicon-calendar'></i><span>会议期间: </span><span id='calendar'> "+v6+" ~ "+v7+"</span></span><span class='place-container' style=''><i class='glyphicon glyphicon-map-marker'></i><span id='place'> "+v5+"</span></span></p></dd><dd><p><span><i class='glyphicon glyphicon-time'></i><span>投稿期间:<span><span>"+v3_1+" ~ "+v3_2+"</span></span></p><div class=''><span class='period_container'><p><i class='glyphicon glyphicon-time'></i><span>注册期间: </span><span id='register_period'>"+v8_1+" ~ "+v8_2+"</span></p></div></dd><dd class='institution'><div class=''><i class='glyphicon glyphicon-home'></i> "+v4+"</div></dd></dl></div></th></tr>"
            );
          }
        }
      })}
      else{
        //alert("1111");
        $.get(meeting_url+"?keyword="+u_key+"&size=10",function(data){
          if(!data)
          {
            alert("错误");
          }
          else
          {
            for(var i=0;i<data.length;i++)
            {
              var v1=data[i].meetingId;
              var v2=data[i].title;
              var v3_1=data[i].postStartDate;
              var v3_2=data[i].postEndDate;
              var v4=data[i].institution;
              if(v4===null)
              {
                v4="未定";
              }
              else{
                v4=data[i].institution.institutionName;
              }
              var v5=data[i].address;
              var v6=data[i].startDate;
              var v7=data[i].endDate;
              var v8_1=data[i].registStartDate;
              var v8_2=data[i].registrationDeadline;
              if(v3_1===null)
                v3_1="未定";
              if(v3_2===null)
                v3_2="未定";
              if(v6===null)
                v6="未定";
              if(v7===null)
                v7="未定";
              if(v8_1===null)
                 v8_1="未定";
              if(v8_2===null)
                v8_2="未定";
              if(v5==="")
                v5="未定";
              $("tbody").append(
                "<tr><th class='list'><div class='list-item'><dl class='dll' style='width: 88%;'><dt><h4><a href='../conference/conference-main.html?meetingId="+v1+"' target='' class='title'>"+v2+"</a></h4></dt><dd class=''><p><span class='calendar-container' style=''><i class='glyphicon glyphicon-calendar'></i><span>会议期间: </span><span id='calendar'> "+v6+" ~ "+v7+"</span></span><span class='place-container' style=''><i class='glyphicon glyphicon-map-marker'></i><span id='place'> "+v5+"</span></span></p></dd><dd><p><span><i class='glyphicon glyphicon-time'></i><span>投稿期间：<span><span> "+v3_1+" ~ "+v3_2+"</span></span></p><div class=''><span class='period_container'><p><i class='glyphicon glyphicon-time'></i><span>注册期间: </span><span id='register_period'>"+v8_1+" ~ "+v8_2+"</span></p></div></dd><dd class='institution'><div class=''><i class='glyphicon glyphicon-home'></i> "+v4+"</div></dd></dl></div></th></tr>"
              );
            }
          }
        })
      }
    });
  }
  function doPostLogin()
  {
      var val1 = document.getElementById("email_username").value;
      var val2 = document.getElementById("password").value;
      var userType = $('#option input:radio:checked').val();
      document.cookie = "type="+userType;
      if(userType=="user_option"){
          $.get(url+"/personal_user?email="+val1+"&password="+val2,function(data)
          {
              if(data==0)
              {
                  alert("用户名或密码不正确！");
              }
              else
              {
                  //alert(document.cookie);
                  document.cookie = "userId="+data;
                  alert("登录成功！");
                  window.location.reload();
              }
          });
      }
      else if(userType=="institution_option"){
          $.get(url+"/institution/login?username="+val1+"&password="+val2,function(data)
          {
              if(data==0)
              {
                  alert("用户名或密码不正确！");
              }
              else
              {
                  document.cookie = "userId="+data;
                  alert("登录成功！");
                  window.location.reload();;
              }
          });
      }
  }
  </script>
</html>
